===========================================================================
【ソ フ ト名】　NCVC - NC(Gcode) Viewer and Converter Ver3.83b
【登  録  名】　ncvc383b.zip
【著作権  者】　眞柄　賢一
【対応  ＯＳ】　Windows Xp以降（全VerOSで動作確認したわけではありません）
【掲  載  日】　2019/07/11
【ソフト種別】　フリーソフト
【転載  条件】　事後でも連絡
===========================================================================

【ソフト紹介】
　一言で言うとフリー（無料）のＣＡＭソフトです。主な機能は以下の通り。

・２次元汎用ＣＡＤで製図した図形情報(DXF)から、ＮＣコードを生成。
　ＣＡＤはＤＸＦ出力可能、かつ、レイヤ名が出力できるものであれば、
　普段使い慣れたソフトでＯＫ！
・ＮＣコードの切削シミュレーション。
・ＮＣコードから各平面(XY,XZ,YZ)単位の２次元ＤＸＦデータ(R12形式)も出力可能。
・アドインＩ／Ｆによりユーザサイドの拡張。
　JW_CADデータ(JWW/JWC)が直接読み込めます。

一応基本的な機能は備えたつもりですが、まだまだ発展途上です。
いずれ「フリーでここまでできるのか！」というくらいまでは...(^o^)v


【ファイルリスト】
　ncvc383b.zipには、次のファイルがあります。
NCVC.exe             ： 本体
Init.mnc             ： 機械情報のサンプル
Lathe.mnc            ： 機械情報のサンプル(旋盤)
Wire.mnc             ： 機械情報のサンプル(ワイヤ)
Init.nci             ： 切削条件ファイルのサンプル
Init.ncj             ： 旋盤データ生成用の切削条件ファイルサンプル
Init.ncw             ： ワイヤ放電加工機生成用の切削条件ファイルサンプル
Laser.nci            ： レーザ加工機用の切削条件ファイルサンプル
Deep.nci             ： 切削条件ファイルのサンプル２(深彫パラメータ)
Header.txt           ： NC生成のカスタムヘッダーファイル
Footer.txt           ： NC生成のカスタムフッダーファイル
HeaderLathe.txt      ： 旋盤用のカスタムヘッダーファイル
FooterLathe.txt      ： 旋盤用のカスタムフッダーファイル
HeaderWire.txt       ： ワイヤ放電用のカスタムヘッダーファイル
FooterWire.txt       ： ワイヤ放電用のカスタムフッダーファイル
HeaderLaser.txt      ： レーザ加工機用のカスタムヘッダーファイル
NCVCcolor.ini        ： お薦めカラーテーブル
---------------------------------------------------------------------
Gcode.txt            ： NCVC対応Ｇコード一覧表
GcodeLathe.txt       ： 　　〃　（旋盤モード差分）
GcodeWire.txt        ： 　　〃　（ワイヤ加工機モード差分）
Readme.txt           ： 本ファイル
sample\sample1.jww   ： サンプルのJW_CADファイル
sample\sample1.ncd   ： サンプルのNCコード
sample\deep.ncd      ： Deep.nciで処理したNCコード
sample\sample2.jww   ： 2.5D切削のサンプルJW_CADファイル
sample\sample2.ncl   ： sample2.jww用2.5D加工条件データ
sample\sample2.ncd   ： 2.5D切削のNCコード
sample\sample3.jww   ： 形状加工のサンプルJW_CADファイル
sample\sample3.cam   ： 形状加工のサンプルCAMファイル
sample\sample3.ncd   ： 形状加工のNCコード
sample\maizuru.jww   ： 文字サンプルのJW_CADデータ
sample\maizuru.ncd   ： 文字サンプルのNCコード
sample\lathe.jww     ： 旋盤モードのサンプルCADデータ
sample\lathe.ncd     ： 旋盤モードのサンプルNCコード
sample\wire_fig*.jww ： ワイヤ放電モードのサンプルCADデータ
sample\wire_fig*.cam ： ワイヤ放電モードのサンプルCAMファイル
sample\wire_fig*.ncd ： ワイヤ放電モードのサンプルNCコード

(※)
Ver0.14.00以降、アドインの同梱は廃止しました。最新のアドイン取得には
NCVCのホームページから必要な分をダウンロードしてください。
## インストーラバージョンはフルパッケージからインストールの選択が可能


【インストール】
　適当なディレクトリに解凍してください。
アドイン類はEXE本体と同じディレクトリに格納してください。
すでにインストールされている方は、
切削条件ファイルやカスタムヘッダーファイル等を上書きしない方がいいでしょう。
(使えるキーワードが増えている場合があるので、都度ご確認ください)
## インストーラバージョンは上書きインストールも可能
## 既に古いバージョンをインストール済みでも
## 「アプリケーションのインストールと削除」に複数掲載されることはありません。


【使用方法】
　ＮＣコードの切削シミュレーションは、ＮＣデータ(*.ncd)を開けば
その切削イメージが表示されます。表示色はカスタマイズ可能。
ＮＣデータ生成手順は以下の通り。

　　(1)ＣＡＤでの製図で、
　　　 ・切削したい線や円(弧)の軌跡、穴加工(実点or円)データを切削レイヤに
　　　 ・工作機械の原点を示す円(中心が工作機械の原点を表す)を原点レイヤに
　　　 ・上記２点は必須。必要に応じて加工開始時の移動パスを表す線or円は
　　　 　加工開始指示レイヤに、切削途中の強制移動指示は移動レイヤに
　　　 を作図。それぞれのレイヤに名前を設定してください。
　　　 以下はNCVCが読み込むデフォルトレイヤ名です。 

　　　　　切削レイヤ：CAM
　　　　　原点レイヤ：ORIGIN
　　　　　加工開始指示レイヤ　：デフォルトなし
　　　　　強制移動指示レイヤ　：デフォルトなし
　　　　　コメント用文字レイヤ：デフォルトなし

　　(2)ＤＸＦ形式で保存。ＤＸＦではそれぞれのＣＡＤ特有の情報が消える可能性が
　　　 あるので、念のためご使用のＣＡＤ独自の形式でも保存(JWW/DWG etc.)。

　　(3)NCVCでＤＸＦを開きます。正しく読むことが出来ればメニューから
　　　「ＮＣ変換」が選択できます。とりあえずそのままＯＫ

　　(4)生成されたＮＣデータがシミュレーションされます。

(3)にてデフォルトの切削条件(init.nci)を指定しましたが、もちろんそれぞれの加工
条件に合わせて設定してあげてください。切削条件ファイルはテキストファイルで保存
されますので、それぞれの加工条件にあった複数の条件ファイルを作っておくと効果的
です。
その他注意点として、

・現在のNCVCは軌跡切削なので使用する工具径を考慮しながら製図する必要がありま
　す。つまり輪郭加工やポケット加工を行う場合は、製図段階で複線による工具分の
　オフセット、または、ポケット加工を行うような軌跡を製図する必要があります。
　(*1)
・加工開始位置指示と強制移動指示のデータは必須ではありません。
　機械原点からの最短移動では工具が干渉してしまう、加工効率を上げるため早送り
　ポイントを指示したいなど、必要に応じて指定してください
・現在のＮＣコード生成エンジンは、基本的に２次元ＤＸＦデータを切削条件ファイル
　に従って３次元加工するだけのことですので、(まだ)Ｚ軸の動的な切削コントロール
　はできません(*2)。したがってネームプレート的な加工やワイヤー加工機などの２Ｄ
　切削に最適でしょう
・ＮＣデータ生成の探索ルールは、「一筆書き(オイラーグラフ)」を採用しています。
　出来るだけ同一Ｚ軸で一筆書き切削できるようなパスを生成(*3)しますが、まだそれ
　ほど賢くありません。あたたかく見守って下さい(^^;)

(*1)Ver1.00以降の形状認識処理を使えば、オフセット演算が可能になりました。
(*2)拡張ＮＣ生成機能（複数レイヤによる一括生成）を使えば、疑似2.5D切削
（等高線切削）も可能です。
(*3)端点での一筆書きのみ。交点での線分割は行いません

一度実行されると、ncd や cam の拡張子に関連づけされます。
関連づけされた後は、エクスプローラから
それぞれの拡張子をダブルクリックするだけで起動できます。
（エクスプローラからのＤ＆Ｄも可能）


【制限事項】
・対応するＧコードは Gcode.txt を参照してください。


【アンインストールについて】
　プログラム情報をレジストリに記録しています。
\HKEY_CURRENT_USER\Software\MNCT-S\NCVC を消去してください。
あと、.ncd と .cam 拡張子に関連づけされますので、それらも削除してください。
（レジストリエディタの検索で探せばでてきます）
## インストーラバージョンでインストールされた環境では、
## 「アプリケーションのインストールと削除」からアンインストール可能です


【再配布・商利用】
　再配布・ご利用に関して、次の条件を守ってください。
・基本的に再配布可能ですが、
  ・取得したアーカイバのまま配布
  ・事後でも連絡
・商用に関しては上記の条件に加え、
  ・NCVCをメインとするような商利用は厳禁
  ・NCVCをバンドルする場合でも、その商品のパッケージやマニュアル類などに
　　著作権表示と再配布条件を必ず明記すること
　ここでいう商用とは、NCVCがソフトウェアとして販売目的に用いられることを
　言います。NCVCの機能を用いて制作・加工した製品はこの限りではありません。


【著作権・知的所有権に関して】
　NCVC本体、および、それにまつわる各種成果物は
舞鶴工業高等専門学校教育研究支援センターの眞柄賢一が著作権を保有します。
アドインやスクリプトは各作者の著作物です。
著作権等を侵害するような行為は堅くお断りいたします。


【免責事項】
　本プログラム使用による損害等は作者は一切責任を持ちません。
特に生成したＮＣデータは加工前に厳重なチェックをお願いします。
また仕様変更義務も持ちませんが、これについてはもちろん良心的に対処します。
どしどし希望・要望をお寄せください。


【変更履歴】
3.83a → 3.83b への変更は
・バグレポート
　：大きめのＮＣプログラムを読み込むと、
　　OpenGLソリッド描画で切削データが欠落していたバグを修正
・他
　：64bit版インストーラでＭＦＣランタイムを自動認識できるようになった
　　→32bit版と同様にランタイムが無いときだけインストールを促すメッセージが出ます

3.83 → 3.83a への変更は
・バグレポート
　：単純にＮＣ生成したら落ちるバグを修正
　　→///orz///

3.82 → 3.83 への変更は
・ＮＣ表示
　：WorkRectキーワードの書式を追加
　　→(WorkRect=200x100t10)と書けば幅200奥行100の中心100,50で厚さ10mmの六面体になります
　　　従来の(WorkRect=200,100,10,-100,-50,-10)と同じですが
　　　加工原点が矩形中心なら追加書式のほうがわかりやすいと思います
　：WorkCylinderキーワードの書式を追加
　　→(WorkCylinder=60h20)と書けば直径60mmの中心で高さ20mmの円柱になります
　　　従来の(WorkCylinder=60,20,0,0,-20)と同じですが
　　　加工原点が円の中心なら追加書式のほうがわかりやすいと思います
・バグレポート
　：複数の切削レイヤを持つＣＡＤデータで標準生成（シングル扱い）すると
　　生成漏れが発生していたバグを修正
　：フォルダ名やファイル名に特定の漢字が使われていると
　　正しく分離できていなかったバグを修正

3.81a → 3.82 への変更は
・ＮＣ表示
　：OpenGLの最低バージョンを2.0から1.5に引き下げ
　　→落ちる原因が他にあったため元に戻しました
　：「有効なNCデータがありませんでした」というエラーメッセージを廃止
　　→NC_Code_Checker.plからの要望で空っぽのビューが表示されます
・バグレポート
　：ＯＳや構成によってNCVCが異常終了することへの対応

3.81 → 3.81a への変更は
・ＮＣ表示
　：OpenGLの表示設定に[FrameBufferObjectを使用]オプションの追加
　　→古いビデオカード搭載のＰＣでOpenGLソリッド表示が正常に出ない場合は
　　　この設定をオフにしてみてください。通常はオンのままで結構です
　：OpenGLの最低バージョンを1.5から2.0に引き上げ
　　→あまりにも古いビデオカードのサポートを切りました
　　　ソリッド表示ができないだけで他の機能は使えます
・バグレポート
　：ＰＣ環境や構成によってNCVCが起動できなかったことへの対応

3.80a → 3.81 への変更は
・他
　：オプショナルブロックスキップの設定をモードレスダイアログでも
　　できるようにした
　　→Ver3.70で予告しておいた変更です

3.80 → 3.80a への変更は
・ＮＣ生成
　：固定サイクルでのドウェル時間に小数点の入力を許可しました
　　→設定ダイアログには常に小数点が表示されます（座標値等と同じ扱い）が、
　　　［時間表記］が整数の場合は小数点以下が無視されます。
　　　旋盤生成の下穴ドウェルは整数固定です。

3.72b → 3.80 への変更は
・ＮＣ表示
　：(Drill=xx)はOpenGL表示で先端角118°にした
　：(LatheHole=xx)キーワードを追加
　　→加工前の中空穴サイズが直径で指定できます
　　　ただしLatheViewよりもあとに記述しないと有効になりません
　：OpenGL旋盤モードでHOMEキーを押したとき切削パスが正面に見えるようにした
　：OpenGL旋盤モードで断面表示をサポート
　　→Ctrl+左ダブルクリックで切替可能です
・ＮＣ生成
　：旋盤生成の機能強化（手抜きマニュアル更新）
　　→従来の外径切削に加え、端面・下穴・内径の加工データを生成
　：[レイヤごとにコメントを埋め込む]の生成オプションを
　　[レイヤ情報をコメントで挿入]に変更し、単一レイヤでも有効にした
・バグレポート
　：穴加工生成でG83以外にもQ値が付いていたバグを修正
　：NCVCで吐いたDXFがAutoCADで読めなかったバグを修正
・他
　：細かな調整（未報告バグ修正含む）

過去の変更履歴および詳細は、
http://s-gikan2.maizuru-ct.ac.jp/xcl/ からリンクを
参照してください。


【バグレポート】
　バグレポート及び要望・サポートなどは、『NCVC掲示板』をご利用願います。

NCVC掲示板
http://s-gikan2.maizuru-ct.ac.jp/xcl/
から「掲示板」リンクをクリック

★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
ヘルプが不備のため、後発の方への情報源として、できるだけ掲示板をご利用くだ
さい。既に質問内容とその解決策が掲示されているかもしれません。
念のため作者メールアドレスも記載していますが、メールでのお問い合わせには答
えられない場合もあります。
E-mail:magara[at]maizuru-ct.ac.jp
舞鶴工業高等専門学校　教育研究支援センター　眞柄　賢一 宛まで。
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★


【謝辞】
　本プログラム作成にあたり、
・影ながら応援していただいている、
　またＣＡＤサンプル配布を快諾していただいた、
　(有)古谷工機　古谷 義博様
・スプラッシュウィンドウご提供の
　金田 誠輝様
・「円データによる穴加工」のアイデアを頂いた
　福岡 正幸様
・ワイヤー加工機での切削テストご協力の
　CBR1100XX 様
・NCVCcolor.ini 雛形ご提供の
　wistra 様
・さまざまな方面からの支援・援助いただいている
　本校教育研究支援センター技術職員
　　石井 貴弘様、能勢 嘉朗様
　京都大学工学研究科精密工学
　　佐藤 祐司様
　京都府立工業高等学校機械プランニング科
　　桂 延裕様
・NCVCテスターを始め、バリバリ使い込んでいる皆様(^^;)
各位には、この場を借りて感謝の意を表します。

なお、本プログラムの研究開発の一部は、
・平成12年度舞鶴工業高等専門学校重点研究費
・平成13年度日本学術振興会科学研究費補助金(奨励研究(B)No.13919089)
・平成21年度日本学術振興会科学研究費補助金(奨励研究No.21919030)
・平成25年度日本学術振興会科学研究費補助金(奨励研究No.25917025)
により遂行されたことを付記します。


【開発環境】
ＣＰＵ　　　：Corei7-3770K 3.5GHz
メモリ　　　：16GB
ビデオ　　　：GeForce GTX 780
ＯＳ　　　　：Windows 10 Enterprise(64bit)
　　　　　　　FreeBSD 8.3-RELEASE(部分的な関数チェックに)
開発言語　　：VisualC++ 2015
　　　　　　　gcc4.2.2
ライブラリ　：MFC, boost-1.70.0, GLEW-2.10, KodatunoR3.2(改)
　Kodatunoは、金沢大学マンマシン研究室で開発されている
　オープンソースCAMカーネルです
